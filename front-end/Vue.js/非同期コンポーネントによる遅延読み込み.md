# Vue.jsのデフォルトのダウンロード
Vue.jsでは、最初のレンダリングの際、必要なコンポーネントが全てダウンロードされる。  
その結果、初回レンダリングに時間がかかる。

<br><br>

# 遅延読み込み
```
import { defineAsyncComponent, shallowRef } from 'vue'
import CompA from './components/CompA.vue'

const CompB = defineAsyncComponent(() => import('./components/CompB.vue'))

import CompC from './components/CompC.vue'
```
* 遅延読み込みさせるコンポーネントに`defineAsyncComponent`を利用する
* defineAsyncComponentで遅延させるコンポーネントは、表示されるときにはじめてダウンロードされる
* 初回レンダリングは速くなるが、表示切替が遅くなる
<br>

## 遅延読み込みの詳細設定
```
import BaseLoader from './components/BaseLoader.vue'
import ErrorMessage from './components/ErrorMessage.vue'

const CompB = defineAsyncComponent({
  loader: () => import('./components/CompB.vue'),
  loadingComponent: BaseLoader,
  delay: 0,
  errorComponent: ErrorMessage,
  timeout: 2000
})
```
* `loader`...遅延読み込みさせるコンポーネントを指定
* `loadingComponent`...遅延読み込みさせるコンポーネントをダウンロード中に表示するコンポーネントを指定
* `delay`...loadingComponentを表示するまでの時間を指定(単位はミリ秒)
* `errorComponent`...エラーとして表示するコンポーネントを指定
* `timeout`...errorComponentを表示するまでの時間を指定(単位はミリ秒)
<br>

※loadingComponentやerrorComponentが表示された後も遅延読み込みは継続し、ダウンロードが終わると表示される。