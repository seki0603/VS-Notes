# Livewire2 と 3 の違い

## Laravel バージョン対応

| Laravel | Livewire 2 | Livewire 3 |
| ------- | ---------- | ---------- |
| 6, 7, 8 | ✔ 対応     | ❌ 非対応  |
| 9       | ✔ 対応     | ✔ 対応     |
| 10      | ✔（一応）  | ✔ 推奨     |
| 11      | ❌         | ✔ 必須     |

<br>

## 内部エンジン

| 項目         | Livewire 2                   | Livewire 3                                   |
| ------------ | ---------------------------- | -------------------------------------------- |
| コアエンジン | Alpine.js + Livewire 独自    | **Livewire + Turbo（SPA 的）**               |
| 動作モデル   | ページの一部を更新する仕組み | SPA のようにページ遷移も Livewire で可能     |
| ページ遷移   | Blade のまま（フルリロード） | **ライブナビゲーション（部分遷移）標準搭載** |

<br>

## フォームの扱い

| 項目             | Livewire 2                        | Livewire 3                                    |
| ---------------- | --------------------------------- | --------------------------------------------- |
| 推奨フォーム構造 | `public $selectedTask` をそのまま | **`public $form = []` の配列構造が推奨**      |
| フォームバインド | 単項目でお手軽                    | 状態管理を重視した構造へ                      |
| バリデーション   | 2.x で作られた書き方が王道        | SPA 的動作に合わせ FormRequest を活かしやすく |

<br>

## パフォーマンス

| 内容               | Livewire 2           | Livewire 3       |
| ------------------ | -------------------- | ---------------- |
| 再レンダリング     | 差分更新だがやや重め | **高速化**       |
| JS サイズ          | 重い                 | **30–40%軽量化** |
| コンポーネント通信 | 全体的に多い         | **最適化済み**   |

<br>

## ファイルアップロード

| 内容                 | Livewire 2 | Livewire 3        |
| -------------------- | ---------- | ----------------- |
| temporaryUrl         | あり       | あり（同じ）      |
| アップロードエンジン | 独自       | 改善され安定性 UP |

<br>

## ページ遷移 (Livewire3 の強み)

- navigate 属性
- ページ遷移しても Livewire の状態保持
- SPA のように高速遷移 \* Blade × Livewire × Turbo
  <br>

# 更新機能の方式の違い

## selectedTask 方式

- メリット
  _ コードが短い
  _ 更新処理が直感的
  _ 小〜中規模ならこれが一番早い
  _ 画像更新なども理解しやすい
  <br>

- デメリット
  _ 大規模化で変数が散らかる
  _ テストが若干やりにくい
  _ バリデーションの prefix が増えると管理が重くなる
  _ Livewire 3 の推奨構造とはズレる
  <br>

## form 配列方式

- メリット
  _ 状態管理が超わかりやすくなる
  _ FormRequest をそのまま流用しやすい
  _ テストしやすい ($component->set('form.title'))
  _ コンポーネント再利用性が高い \* 画面が複雑になるほど強くなる
  <br>

- デメリット
  _ 記述量が増える
  _ 学習コストが高い \* 前提となる設計が多いため、小規模には向かない
  <br>
