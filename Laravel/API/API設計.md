# リソースの決定

1. ユーザーが必要としている情報源（リソース）の洗い出し
2. リソースに対して必要な操作（CRUD）
3. リソースの親子関係
   <br>

リソース = DB テーブルとは限らない

# URL 設計

1. 一目で API とわかる URL にする
2. URL に API のバージョンを含める
3. URL に動詞を含めず、複数形の動詞のみで構成する
4. アプリケーションや言語に依存する拡張子を含めない
5. リソースの関係性が一目でわかるようにする
6. 長くしすぎない

## 一目で API とわかる URL にする

- ディレクトリに分ける場合...`http://example.com/api`
- サブドメインに切り分ける場合...`http://api.example.com`
  <br>

### サブドメインとは

独自ドメイン「○○○.com」を本体ドメインとしたとき、「△△△.○○○.com」のように、ドメインの先頭に文字列を挿入しているドメイン。

- 一つのブランドで複数のサービスを展開する場合などに使用

## URL に API のバージョンを含める

- `http://api.example.com/1`
- `http://api.example.com/v1`

## URL に動詞を含めず、複数形の動詞のみで構成する

- URL はリソースそのものを表し、操作（動詞）を含めないようにする
- リソースに対し、一つの URL を割り当てる
  <br>

### 設定例

- article 全てを指す...`http://api.example.com/v1/articles`
- articles の中の ID：126 を指す...`http://api.example.com/v1/articles/126`
- articles の中の ID:126 についた comment 全てを指す...`http://api.example.com/v1/articles/126/comments`
  <br>
  ID を URL に含めることでリソース毎に一意の URL を割り当てることができる
  <br>

#### 悪い例

- `http://api.example.com/v1/createArticle`
- `http://api.example.com/v1/article/createComment`

## アプリケーションや言語に依存する拡張子を含めない

URL の末尾に.php や.pl などの言語に関係した拡張子をつけない

## リソースの関係性が一目でわかるようにする

URL を見ただけでリソースがどこに属しているか分かるようにする
例：`http://api.example.com/v1/articles/126/comments/`  
 → 記事 ID:126 に紐づいているコメントであることが分かる

# HTTP メソッドの決定

URL に動詞を含めないため、CRUD 処理は HTTP メソッドで切り分ける

| メソッド名 | 役割                             |
| ---------- | -------------------------------- |
| GET        | リソースの取得                   |
| POST       | リソースの作成                   |
| PUT        | リソースの全体更新（置き換え）   |
| PATCH      | リソースの部分更新（一部を更新） |
| DELETE     | リソースの削除                   |

# 設計のコツ
## フィルタ・ソート・検索
* ベースとなるURLをシンプルにしておく
* フィルタ・ソート・検索はクエリパラメータで制御する

## レスポンスのフィールド
* 必要な情報のみに絞り、ネットワーク負荷を下げる
* 出力したいフィールドをカンマ区切りで指定する

## 作成・更新後の情報
POST,PATCH,PUTリクエストのレスポンスには変更後のれソース情報を含めるようにする